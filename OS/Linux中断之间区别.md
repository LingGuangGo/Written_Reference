## Linux中断区别

### 硬件中断和软件中断

| 中断区别    | 硬件中断                  | 软件中断                                             |
| ----------- | ------------------------- | ---------------------------------------------------- |
| 中断源产生  | 硬件外设                  | 执行中断指令                                         |
| 中断号提供  | 中断控制器                | 由指令直接指出                                       |
| 可屏蔽      | 可屏蔽                    | 不可屏蔽                                             |
| ISR中断分层 | 上半部分ISR: 需要快速完成 | 下半部ISR, 通过软中断完成                            |
|             |                           | 软中断: 处理硬中断未完成的工作, 是一种推后执行的机制 |

1. 硬件中断
   + 硬件外设: 由与系统相连的外设(比如网卡 硬盘 键盘等)自动产生
   + 每个设备或设备集都有他自己的IRQ(中断请求), 基于IRQ
     + CPU可以将相应的**请求**分发到相应的**硬件驱动**上
     + 硬件驱动通常是内核中的一个子程序, 而不是一个独立的进程
   + **处理中断的驱动**: 是需要运行在CPU上的, 当中断产生时, CPU会暂时停止当前程序的程序转而执行中断请求;
2. 软件中断
   + 不会直接中断CPU, 当前正在运行的代码(或进程)才会产生软中断;
   + 软中断: 是一种需要内核为正在运行的进程去做一些事情(通常为I/O)的请求;

### 软中断和软件中断

1. 软中断(ISR下半部分的中断)
   + 概念: 用软件方式模拟硬件中断的概念，实现宏观上的异步执行效果
   + 软中断又是和硬中断相对应的
     + “硬中断是外部设备对**CPU**的中断”
     + “软中断通常是硬件中断服务程序对内核的中断”*
   + 软中断: 通常是**硬中断ISR**对内核的中断
   + 信号: 则是由内核（或其它进程）对某个进程的中断
2. 软件中断(**系统调用**)
   + 软件触发的中断