## 内存管理中kmalloc和vmalloc的区别

| 区别 | kmalloc()                   | vmalloc                                                  | __get_free_page |
| ---- | --------------------------- | -------------------------------------------------------- | --------------- |
| 作用 | 开辟内核空间                | 开辟内核空间                                             | 最底层的机制    |
| 空间 | 分配页的大小                |                                                          | 2^n页进行分配   |
| 连续 | 物理空间连续                | 不连续                                                   | 物理空间连续    |
| DMA  | 能直接作用于DMA             | 不能                                                     |                 |
| 阻塞 | 阻塞等待，睡眠              | 非阻塞申请                                               |                 |
| 内存 | 从低端内存分配              | 分配的一般为高端内存<br />当内存不够的时候才分配低端内存 |                 |
|      | 一般分配的为小块内存(<128k) | 分配的一般为大块内存                                     |                 |



### DMA工作原理

1. DMA 作为**内存**与**外设**之间传输数据的方式, 不需要cpu的参与;减少CPU对快速设备入出的操作

2. 把这批数据的传输过程交由一块专用的接口卡**（DMA接口）**来控制

   + 让DMA卡代替CPU控制在快速设备与主存储器之间直接传输数据
   + CPU只须向DMA控制器下达指令，让DMA控制器来处理数据的传送，数据传送完毕再把信息反馈给CPU，这样就很大程度上减轻了CPU资源占有率。

   {% asset_img DMA.png %}