## 信号量互斥体自旋锁的概念

| 锁的机制 | 自旋锁           | 信号量 |
| -------- | ---------------- | ------ |
| 特性     | 循环-旋转-等待锁 | 睡眠锁 |
|          |                  |        |
|          |                  |        |

### Linux 内核同步机制

1. Linux 内核中的同步机制：原子操作、信号量、读写信号量和自旋锁的API
2. 另外一些同步机制
   + 包括大内核锁、读写锁、大读者锁、RCU (Read-Copy Update)，和顺序锁

### 信号量

1. 信号量本质是一个计数器, 用于记录某个资源(共享内存)的使用情况;
2. 多线程中, 将信号量的值初始化为最大的线程数, 当线程调用sem_wait()时, 信号量减一; 调用sem_post(), 信号量加1;
3. 当信号量为0时, 表示当前资源不可用, 新的线程会进入睡眠状态, 直到信号值大于0, 线程被唤醒

### 互斥体

1. 互斥体禁止多个线程同时进入受保护的代码“临界区”.
2. 在任意时刻，只有一个线程被允许进入这样的代码保护区。
3. 任何线程在进入临界区之前
   + 必须获取（acquire）与此区域相关联的互斥体的所有权。
   + 如果已有另一线程拥有了临界区的互斥体，其他线程就不能再进入其中。
   + 这些线程必须等待，直到当前的属主线程释放（release）该互斥体
4. 什么时候需要使用互斥体呢？
   + 互斥体用于保护共享的易变代码，
   + 也就是，全局或静态数据。

### 自旋锁

1. 它是为实现保护共享资源而提出一种锁机制。
2. 自旋锁与互斥锁相同点?
   + 它们都是为了解决对某项资源的互斥使用。
   + 在任何时刻最多只能有一个执行单元获得锁。
3. 自旋锁与互斥锁不同点?
   + 两者在调度机制上略有不同。
   + 对于互斥锁，如果资源已经被占用，资源申请者只能进入**睡眠状态**。
   + 自旋锁: 调用者就一直循环, 等待锁的释放;
     